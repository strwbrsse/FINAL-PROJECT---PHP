<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="styles.css"> 
    <script src="dashboard.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.0/dist/sweetalert2.all.min.js"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header>
            <h1>Welcome to Your Dashboard</h1>
            <button onclick="logout()">Logout</button>
        </header>
        
        <section class="quick-actions">
            <h2>Quick Actions</h2>
            <button onclick="scheduleAppointment()">Schedule New Appointment</button>
            <button onclick="updateInformation()">Update My Information</button>
        </section>

        <section class="vaccination-history">
            <h2>Vaccination History</h2>
            <div id="vaccination-history-content">
            </div>
        </section>

        <section class="upcoming-appointments">
            <h2>Upcoming Appointments</h2>
            <div id="upcoming-appointments-content">
            </div>
        </section>

        <section class="reminders">
            <h2>Vaccination Reminders</h2>
            <ul id="reminder-list">
            </ul>
        </section>

        <section id="faq-section">
            <h2>COVID-19 Vaccination FAQ</h2>
            <ul>
                <li><strong>What is a COVID-19 vaccine?</strong> The COVID-19 vaccine helps protect against the coronavirus disease. It stimulates the immune system to fight the virus and prevents severe illness, hospitalization, and death.</li>
                <li><strong>Are COVID-19 vaccines safe?</strong> Yes, COVID-19 vaccines have gone through rigorous testing in clinical trials. They are approved by health authorities like the WHO and FDA and have been shown to be safe and effective.</li>
                <li><strong>What are the side effects of the COVID-19 vaccine?</strong> Common side effects include pain at the injection site, fatigue, headaches, and fever. These side effects usually go away within a few days. </li>
                <li><strong>Do I need to get the vaccine if I already had COVID-19?</strong> Yes, it is recommended to get vaccinated even if you've had COVID-19. This will provide additional protection and boost your immunity.</li>
            </ul>
        </section>

        <section class="feedback">
            <h2>Feedback</h2>
            <form id="feedbackForm">
                <textarea id="feedbackText" placeholder="Leave your feedback here"></textarea>
                <button type="submit">Submit Feedback</button>
            </form>
        </section>
    </div>

    <script>
        document.getElementById('feedbackForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission
        
            const feedback = document.getElementById('feedbackText').value;
        
            if (feedback.trim() !== "") { // Check if feedback is not empty
                // Send feedback via AJAX
                fetch('Feedback.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ feedback: feedback })
                })
                .then(response => response.json())
                .then(data => {
                    // Check if the response indicates success
                    if (data.success) {
                        // Show SweetAlert on success
                        Swal.fire({
                            title: 'Thank you for your feedback!',
                            text: 'We appreciate your input and will use it to improve our services.',
                            icon: 'success',
                            confirmButtonText: 'Close'
                        });
                    } else {
                        // Show SweetAlert on failure
                        Swal.fire({
                            title: 'Oops!',
                            text: 'There was an issue submitting your feedback. Please try again later.',
                            icon: 'error',
                            confirmButtonText: 'Close'
                        });
                    }
                })
                .catch(error => {
                    // Show SweetAlert for network error or unexpected issue
                    Swal.fire({
                        title: 'Error',
                        text: 'Something went wrong! Please try again later.',
                        icon: 'error',
                        confirmButtonText: 'Close'
                    });
                });
            } else {
                // Show SweetAlert for empty feedback
                Swal.fire({
                    title: 'Error',
                    text: 'Please enter some feedback before submitting.',
                    icon: 'warning',
                    confirmButtonText: 'Close'
                });
            }
        });
        </script>
        
</body>
</html>